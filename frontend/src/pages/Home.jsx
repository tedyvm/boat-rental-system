import "react-date-range/dist/styles.css";
import "react-date-range/dist/theme/default.css";
import "../styles/Home.css";
import SearchBar from "../components/SearchBar";
import { useNavigate } from "react-router-dom";
import { useState, useEffect } from "react";

export default function Home() {
  const navigate = useNavigate();

  const [counts, setCounts] = useState({
    sailingYacht: 0,
    catamaran: 0,
  });

  useEffect(() => {
    const fetchCounts = async () => {
      try {
        // Gali naudoti savo esamą API
        const [sailingRes, catRes] = await Promise.all([
          fetch("http://localhost:5000/api/boats/search?type=Sailing+Yacht"),
          fetch("http://localhost:5000/api/boats/search?type=Catamaran"),
        ]);

        if (!sailingRes.ok || !catRes.ok) throw new Error("Failed to fetch boats");

        const sailingData = await sailingRes.json();
        const catData = await catRes.json();

        setCounts({
          sailingYacht: sailingData.length,
          catamaran: catData.length,
        });
      } catch (err) {
        console.error("Error fetching counts:", err);
      }
    };

    fetchCounts();
  }, []);

  const handleSearch = (filters) => {
    console.log("Filters:", filters);
    // čia galėsi daryti redirect į /boats su query parametrais
    // pvz.: navigate(`/boats?${new URLSearchParams(filters)}`);
  };

  return (
    <div>
      <div className="container-fluid hero-section">
        <div className="container hero-container pb-5">
          <div className="row">
            <div className="col-lg-6 col-12 text-white text-start text-md-center ">
              <h1 className="hero-title">Sailing adventure starts here...</h1>
              <p className="hero-subtitle mt-3">
                Find the best boats at the best prices – start your journey
                today!
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* Search Bar */}
      <div className="container-fluid search-bar">
        <div className="container">
          <SearchBar onSearch={handleSearch} />
        </div>
      </div>

      {/* Additional Content */}
      <div className="container pt-5">
        <h2 className="">What type of boat you’re looking for? </h2>
        <p>Wide choice online for the best prices</p>
        {/* S1 */}
        <div className="row g-4">
          <div className="col-12 col-lg-6 p-3" onClick={() => navigate('/boats?type=Sailing+Yacht')}>
            <div className="s1c1 align-content-end text-center p-4">
              <h3>Sailing Yacht</h3>
              <p>{counts.sailingYacht} Yachts</p>
            </div>
          </div>
          <div className="col-12 col-lg-6 p-3 " onClick={() => navigate('/boats?type=Catamaran')}>
            <div className="s1c2 align-content-end text-center p-4">
              <h3>Catamaran</h3>
              <p>{counts.catamaran} Catamarans</p>
            </div>
          </div>
        </div>
        {/* S2 */}
        <div className="row my-5">
          <div className="col-12 col-md-6 col-lg-4 my-2 d-flex">
            <div className="s2-icon m-2">
              <svg
                width="40"
                height="42"
                viewBox="0 0 40 42"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.0880303 29.5458C-0.209323 27.0683 0.539661 24.7135 2.33687 22.4833C4.13411 20.253 6.61154 18.5431 9.77108 17.3537C12.9306 16.1642 16.2946 15.7683 19.863 16.1642C21.623 16.363 23.3255 16.5917 24.974 16.8518C26.6226 17.112 28.1577 17.428 29.5833 17.7997C31.0088 18.1714 32.3656 18.6045 33.6534 19.1007C34.9174 19.5969 35.9823 20.2344 36.8502 21.015C37.7182 21.7956 38.417 22.6821 38.9504 23.6727C39.4837 24.6633 39.8109 25.7673 39.9355 26.9809C40.2086 29.4343 39.4467 31.869 37.6493 34.2851C35.8522 36.7012 33.3878 38.5914 30.2524 39.9537C27.117 41.3161 23.779 41.7881 20.2346 41.3661C18.2517 41.1431 16.3504 40.8403 14.529 40.4556C12.7076 40.0706 11.0293 39.6006 9.4923 39.0429C7.95527 38.4855 6.54279 37.848 5.2548 37.1287C4.21402 36.534 3.3405 35.8519 2.63425 35.0842C1.92799 34.3167 1.35742 33.4729 0.924366 32.5566C0.49135 31.6403 0.212532 30.6367 0.0880303 29.5458Z"
                  fill="#45CAD1"
                />
                <path
                  d="M27.3824 10.7059L19.8038 18.2174C19.4059 18.6106 18.7606 18.6106 18.3625 18.2174L14.502 14.3934L15.9433 12.9695L19.0832 16.0814L25.9412 9.28186L27.3824 10.7059Z"
                  fill="#001228"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M24.9922 3.4148C25.1591 3.47907 25.3242 3.54725 25.4872 3.61924C27.0691 2.5902 29.2167 2.76321 30.6083 4.13826C32.002 5.5152 32.1756 7.64116 31.1291 9.20472C31.201 9.36317 31.2693 9.52359 31.3339 9.68583C33.1912 10.0617 34.5882 11.6854 34.5882 13.6316C34.5882 15.5307 33.258 17.1229 31.4679 17.548C31.3899 17.7656 31.3052 17.9801 31.2142 18.1912C32.1649 19.7406 31.963 21.7867 30.6083 23.1251C29.5098 24.2105 27.9402 24.5469 26.5497 24.1343L29.0636 33.4043L25.7352 31.5056L23.8135 34.7942L21.6993 26.9983C21.4721 27.0371 21.2384 27.0574 21 27.0574C20.7317 27.0574 20.4694 27.0318 20.2155 26.9829L18.0971 34.7942L16.1755 31.5056L12.8471 33.4043L15.3535 24.1617C13.9874 24.5309 12.4648 24.1853 11.3917 23.125C10.0371 21.7867 9.83509 19.7407 10.7857 18.1913C10.6947 17.9802 10.6101 17.7656 10.532 17.5479C8.74196 17.1228 7.41174 15.5307 7.41174 13.6316C7.41174 11.6854 8.80876 10.0617 10.666 9.68591C10.7306 9.52359 10.7989 9.36317 10.8708 9.20472C9.82439 7.64111 9.99801 5.51519 11.3916 4.13818C12.7833 2.76321 14.9309 2.5902 16.5127 3.61923C16.6758 3.54724 16.8408 3.47905 17.0078 3.41477C17.3907 1.58295 19.0326 0.205933 21 0.205933C22.9674 0.205933 24.6093 1.58296 24.9922 3.4148ZM29.647 13.7942C29.647 18.5698 25.7756 22.4412 21 22.4412C16.2243 22.4412 12.3529 18.5698 12.3529 13.7942C12.3529 9.01852 16.2243 5.14709 21 5.14709C25.7756 5.14709 29.647 9.01852 29.647 13.7942Z"
                  fill="#001228"
                />
              </svg>
            </div>
            <div className="s2-content">
              <h4>Unbeatable prices</h4>
              <p>Save money on deals you won't find anywhere else</p>
            </div>
          </div>
          <div className="col-12 col-md-6 col-lg-4 my-2 d-flex">
            <div className="s2-icon m-2 ">
              <svg
                width="40"
                height="42"
                viewBox="0 0 40 42"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.0880303 29.5458C-0.209323 27.0683 0.539661 24.7135 2.33687 22.4833C4.13411 20.253 6.61154 18.5431 9.77108 17.3537C12.9306 16.1642 16.2946 15.7683 19.863 16.1642C21.623 16.363 23.3255 16.5917 24.974 16.8518C26.6226 17.112 28.1577 17.428 29.5833 17.7997C31.0088 18.1714 32.3656 18.6045 33.6534 19.1007C34.9174 19.5969 35.9823 20.2344 36.8502 21.015C37.7182 21.7956 38.417 22.6821 38.9504 23.6727C39.4837 24.6633 39.8109 25.7673 39.9355 26.9809C40.2086 29.4343 39.4467 31.869 37.6493 34.2851C35.8522 36.7012 33.3878 38.5914 30.2524 39.9537C27.117 41.3161 23.779 41.7881 20.2346 41.3661C18.2517 41.1431 16.3504 40.8403 14.529 40.4556C12.7076 40.0706 11.0293 39.6006 9.4923 39.0429C7.95527 38.4855 6.54279 37.848 5.2548 37.1287C4.21402 36.534 3.3405 35.8519 2.63425 35.0842C1.92799 34.3167 1.35742 33.4729 0.924366 32.5566C0.49135 31.6403 0.212532 30.6367 0.0880303 29.5458Z"
                  fill="#45CAD1"
                />
                <path
                  d="M12.82 10.688C13.14 10.9013 13.4013 11.1786 13.604 11.52C13.8067 11.8613 13.908 12.224 13.908 12.608C13.908 13.2267 13.6893 13.7547 13.252 14.192C12.8147 14.6293 12.2867 14.848 11.668 14.848C11.0493 14.848 10.5213 14.6293 10.084 14.192C9.64666 13.7547 9.42799 13.2267 9.42799 12.608C9.42799 12.2027 9.53466 11.824 9.74799 11.472C9.96133 11.12 10.2387 10.848 10.58 10.656C10.708 8.75732 11.2893 7.01865 12.324 5.43998C13.3587 3.86132 14.6867 2.62398 16.308 1.72798C17.9933 0.789316 19.796 0.319983 21.716 0.319983C23.636 0.319983 25.4387 0.789316 27.124 1.72798C28.7453 2.62398 30.068 3.86132 31.092 5.43998C32.116 7.01865 32.7027 8.75732 32.852 10.656C33.1933 10.848 33.4707 11.12 33.684 11.472C33.8973 11.824 34.004 12.2027 34.004 12.608C34.004 13.2267 33.7853 13.7547 33.348 14.192C32.9107 14.6293 32.3827 14.848 31.764 14.848H27.508C26.9107 15.8507 26.1 16.6613 25.076 17.28C24.052 17.8987 22.932 18.208 21.716 18.208C20.5 18.208 19.38 17.9093 18.356 17.312C17.332 16.7147 16.5213 15.8987 15.924 14.864C15.3267 13.8293 15.028 12.704 15.028 11.488C15.028 10.272 15.3267 9.15198 15.924 8.12798C16.5213 7.10398 17.332 6.29332 18.356 5.69598C19.38 5.09865 20.5 4.79998 21.716 4.79998C22.932 4.79998 24.052 5.09865 25.076 5.69598C26.1 6.29332 26.9107 7.10398 27.508 8.12798C28.1053 9.15198 28.404 10.272 28.404 11.488C28.404 11.872 28.372 12.2453 28.308 12.608H29.524C29.524 12.224 29.6253 11.8613 29.828 11.52C30.0307 11.1786 30.292 10.9013 30.612 10.688C30.484 9.19465 30.004 7.82398 29.172 6.57598C28.34 5.32798 27.284 4.35198 26.004 3.64798C24.6813 2.92265 23.252 2.55998 21.716 2.55998C20.18 2.55998 18.7507 2.92265 17.428 3.64798C16.148 4.35198 15.092 5.32798 14.26 6.57598C13.428 7.82398 12.948 9.19465 12.82 10.688ZM26.036 12.608C26.1213 12.288 26.164 11.9146 26.164 11.488C26.164 10.6773 25.9667 9.93065 25.572 9.24798C25.1773 8.56532 24.6387 8.02665 23.956 7.63198C23.2733 7.23732 22.5267 7.03998 21.716 7.03998C20.9053 7.03998 20.1587 7.23732 19.476 7.63198C18.7933 8.02665 18.2493 8.56532 17.844 9.24798C17.4387 9.93065 17.236 10.6773 17.236 11.488C17.236 12.2987 17.4387 13.0453 17.844 13.728C18.2493 14.4107 18.7933 14.9547 19.476 15.36C20.1587 15.7653 20.9053 15.968 21.716 15.968C22.2707 15.968 22.804 15.872 23.316 15.68C23.828 15.488 24.276 15.2106 24.66 14.848H21.716C21.4173 14.848 21.156 14.736 20.932 14.512C20.708 14.288 20.596 14.0266 20.596 13.728C20.596 13.4293 20.708 13.168 20.932 12.944C21.156 12.72 21.4173 12.608 21.716 12.608H26.036ZM21.716 21.536C19.9027 21.536 18.2173 21.9947 16.66 22.912C15.1453 23.808 13.94 25.0133 13.044 26.528C12.1267 28.0853 11.668 29.7707 11.668 31.584H9.42799C9.42799 29.3653 9.98266 27.296 11.092 25.376C12.18 23.52 13.652 22.048 15.508 20.96C17.428 19.8507 19.4973 19.296 21.716 19.296C23.9347 19.296 26.004 19.8507 27.924 20.96C29.78 22.048 31.252 23.52 32.34 25.376C33.4493 27.296 34.004 29.3653 34.004 31.584H31.764C31.764 29.7707 31.3053 28.0853 30.388 26.528C29.492 25.0133 28.2867 23.808 26.772 22.912C25.2147 21.9947 23.5293 21.536 21.716 21.536Z"
                  fill="#001228"
                />
              </svg>
            </div>
            <div className="s2-content">
              <h4>Excellent customer support</h4>
              <p>7 days a week / 24 hours a day</p>
            </div>
          </div>
          <div className="col-12 col-md-6 col-lg-4 my-2 mx-auto d-flex">
            <div className="s2-icon m-2">
              <svg
                width="40"
                height="42"
                viewBox="0 0 40 42"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.0880303 29.5458C-0.209323 27.0683 0.539661 24.7135 2.33687 22.4833C4.13411 20.253 6.61154 18.5431 9.77108 17.3537C12.9306 16.1642 16.2946 15.7683 19.863 16.1642C21.623 16.363 23.3255 16.5917 24.974 16.8518C26.6226 17.112 28.1577 17.428 29.5833 17.7997C31.0088 18.1714 32.3656 18.6045 33.6534 19.1007C34.9174 19.5969 35.9823 20.2344 36.8502 21.015C37.7182 21.7956 38.417 22.6821 38.9504 23.6727C39.4837 24.6633 39.8109 25.7673 39.9355 26.9809C40.2086 29.4343 39.4467 31.869 37.6493 34.2851C35.8522 36.7012 33.3878 38.5914 30.2524 39.9537C27.117 41.3161 23.779 41.7881 20.2346 41.3661C18.2517 41.1431 16.3504 40.8403 14.529 40.4556C12.7076 40.0706 11.0293 39.6006 9.4923 39.0429C7.95527 38.4855 6.54279 37.848 5.2548 37.1287C4.21402 36.534 3.3405 35.8519 2.63425 35.0842C1.92799 34.3167 1.35742 33.4729 0.924366 32.5566C0.49135 31.6403 0.212532 30.6367 0.0880303 29.5458Z"
                  fill="#45CAD1"
                />
                <path
                  d="M22.769 22.848C23.665 22.848 24.4917 22.624 25.249 22.176C26.0063 21.728 26.609 21.1253 27.057 20.368C27.505 19.6107 27.729 18.784 27.729 17.888C27.729 16.992 27.505 16.1653 27.057 15.408C26.609 14.6507 26.0063 14.0533 25.249 13.616C24.4917 13.1787 23.665 12.96 22.769 12.96C21.873 12.96 21.0463 13.1787 20.289 13.616C19.5317 14.0533 18.929 14.6507 18.481 15.408C18.033 16.1653 17.809 16.992 17.809 17.888C17.809 18.784 18.033 19.6107 18.481 20.368C18.929 21.1253 19.5317 21.728 20.289 22.176C21.0463 22.624 21.873 22.848 22.769 22.848ZM25.425 17.888C25.425 18.6347 25.1637 19.2693 24.641 19.792C24.1183 20.3147 23.4943 20.576 22.769 20.576C22.0437 20.576 21.4143 20.3093 20.881 19.776C20.3477 19.2427 20.081 18.6133 20.081 17.888C20.081 17.1627 20.3423 16.5387 20.865 16.016C21.3877 15.4933 22.0223 15.232 22.769 15.232C23.5157 15.232 24.145 15.488 24.657 16C25.169 16.512 25.425 17.1413 25.425 17.888ZM12.081 25.152C12.849 25.152 13.553 24.9653 14.193 24.592C14.833 24.2187 15.3397 23.7067 15.713 23.056C16.0863 22.4053 16.273 21.7013 16.273 20.944C16.273 20.1867 16.0863 19.488 15.713 18.848C15.3397 18.208 14.833 17.7013 14.193 17.328C13.553 16.9547 12.8543 16.768 12.097 16.768C11.3397 16.768 10.6357 16.9547 9.985 17.328C9.33434 17.7013 8.82234 18.208 8.449 18.848C8.07567 19.488 7.889 20.1867 7.889 20.944C7.889 21.7013 8.07567 22.4053 8.449 23.056C8.82234 23.7067 9.33434 24.2187 9.985 24.592C10.6357 24.9653 11.3343 25.152 12.081 25.152ZM14.001 20.96C14.001 21.4933 13.8143 21.9413 13.441 22.304C13.0677 22.6667 12.6197 22.848 12.097 22.848C11.5743 22.848 11.1263 22.6667 10.753 22.304C10.3797 21.9413 10.193 21.4933 10.193 20.96C10.193 20.4267 10.3797 19.9733 10.753 19.6C11.1263 19.2267 11.5743 19.04 12.097 19.04C12.6197 19.04 13.0677 19.2267 13.441 19.6C13.8143 19.9733 14.001 20.4267 14.001 20.96ZM28.465 20.96C28.465 21.7067 28.6517 22.4053 29.025 23.056C29.3983 23.7067 29.9103 24.2187 30.561 24.592C31.2117 24.9653 31.9157 25.152 32.673 25.152C33.4303 25.152 34.129 24.9653 34.769 24.592C35.409 24.2187 35.9157 23.7067 36.289 23.056C36.6623 22.4053 36.849 21.7013 36.849 20.944C36.849 20.1867 36.6623 19.488 36.289 18.848C35.9157 18.208 35.409 17.7013 34.769 17.328C34.129 16.9547 33.4303 16.768 32.673 16.768C31.9157 16.768 31.2117 16.9547 30.561 17.328C29.9103 17.7013 29.3983 18.208 29.025 18.848C28.6517 19.488 28.465 20.192 28.465 20.96ZM32.657 22.848C32.1237 22.848 31.6757 22.6667 31.313 22.304C30.9503 21.9413 30.769 21.4933 30.769 20.96C30.769 20.4267 30.9503 19.9733 31.313 19.6C31.6757 19.2267 32.1237 19.04 32.657 19.04C33.1903 19.04 33.6437 19.2267 34.017 19.6C34.3903 19.9733 34.577 20.4267 34.577 20.96C34.577 21.4933 34.3903 21.9413 34.017 22.304C33.6437 22.6667 33.1903 22.848 32.657 22.848ZM22.385 24.384C23.7503 24.384 25.0197 24.7253 26.193 25.408C27.3663 26.0907 28.2943 27.0187 28.977 28.192C29.6597 29.3653 30.001 30.6347 30.001 32H27.729C27.729 31.04 27.489 30.1493 27.009 29.328C26.529 28.5067 25.8783 27.856 25.057 27.376C24.2357 26.896 23.345 26.656 22.385 26.656C21.425 26.656 20.5343 26.896 19.713 27.376C18.8917 27.856 18.241 28.5067 17.761 29.328C17.281 30.1493 17.041 31.04 17.041 32H14.769C14.769 30.6133 15.1103 29.3387 15.793 28.176C16.4757 27.0133 17.3983 26.0907 18.561 25.408C19.7237 24.7253 20.9983 24.384 22.385 24.384ZM13.873 26.304C13.1477 26.0267 12.433 25.888 11.729 25.888C10.6197 25.888 9.59567 26.1653 8.657 26.72C7.71834 27.2747 6.977 28.016 6.433 28.944C5.889 29.872 5.617 30.8907 5.617 32H7.889C7.889 31.3173 8.05967 30.6827 8.401 30.096C8.74234 29.5093 9.21167 29.0453 9.809 28.704C10.4063 28.3627 11.0463 28.192 11.729 28.192C12.3477 28.192 12.8917 28.32 13.361 28.576L13.873 26.304ZM33.041 25.888C32.337 25.888 31.6223 26.0267 30.897 26.304L31.409 28.576C31.8997 28.32 32.4437 28.192 33.041 28.192C33.7237 28.192 34.3583 28.3627 34.945 28.704C35.5317 29.0453 35.9957 29.5093 36.337 30.096C36.6783 30.6827 36.849 31.3173 36.849 32H39.153C39.153 30.8907 38.8757 29.872 38.321 28.944C37.7663 28.016 37.025 27.2747 36.097 26.72C35.169 26.1653 34.1503 25.888 33.041 25.888ZM23.537 1.568V0H21.233V1.568C19.2917 1.696 17.4357 2.176 15.665 3.008C13.9583 3.79733 12.433 4.85867 11.089 6.192C9.745 7.52533 8.67834 9.04533 7.889 10.752C7.54767 11.2213 7.30234 11.7013 7.153 12.192H9.745C9.78767 12.064 9.83034 11.9787 9.873 11.936C10.2143 11.488 10.641 11.1307 11.153 10.864C11.665 10.5973 12.2303 10.464 12.849 10.464C13.4677 10.464 14.0543 10.6187 14.609 10.928C15.1637 11.2373 15.6117 11.6587 15.953 12.192H19.249C19.569 11.68 20.0117 11.264 20.577 10.944C21.1423 10.624 21.745 10.464 22.385 10.464C23.025 10.464 23.6223 10.6187 24.177 10.928C24.7317 11.2373 25.1797 11.6587 25.521 12.192H28.817C29.1583 11.6587 29.6063 11.2373 30.161 10.928C30.7157 10.6187 31.3023 10.464 31.921 10.464C32.5397 10.464 33.105 10.5973 33.617 10.864C34.129 11.1307 34.5557 11.488 34.897 11.936L35.025 12.192H37.617C37.4037 11.616 37.1583 11.136 36.881 10.752C36.0703 9.04533 34.9983 7.52533 33.665 6.192C32.3317 4.85867 30.8117 3.79733 29.105 3.008C27.3343 2.176 25.4783 1.696 23.537 1.568ZM12.305 8.192C13.2863 7.14667 14.4063 6.26667 15.665 5.552C16.9237 4.83733 18.2677 4.34133 19.697 4.064C18.9717 4.85333 18.3743 5.65333 17.905 6.464C17.3717 7.40267 16.9663 8.448 16.689 9.6C16.1557 9.152 15.5583 8.80533 14.897 8.56C14.2357 8.31466 13.5423 8.192 12.817 8.192H12.305ZM22.385 8.192C21.2117 8.192 20.1557 8.49067 19.217 9.088C19.4303 8.46933 19.6543 7.968 19.889 7.584C20.3797 6.70933 21.2117 5.71733 22.385 4.608C23.5583 5.71733 24.3903 6.70933 24.881 7.584C25.1583 8.096 25.3823 8.59733 25.553 9.088C24.593 8.49067 23.537 8.192 22.385 8.192ZM26.865 6.464C26.4597 5.76 25.8623 4.96 25.073 4.064C26.5023 4.34133 27.8463 4.83733 29.105 5.552C30.3637 6.26667 31.473 7.14667 32.433 8.192H31.953C31.2277 8.192 30.5343 8.31466 29.873 8.56C29.2117 8.80533 28.6143 9.152 28.081 9.6C27.8037 8.448 27.3983 7.40267 26.865 6.464Z"
                  fill="#001228"
                />
              </svg>
            </div>
            <div className="s2-content">
              <h4>Safe booking</h4>
              <p>Free cancellation and low prepayment</p>
            </div>
          </div>
        </div>
      </div>
      {/* Section 3 */}
      <div className="container-fluid s3">
        <div className="container">
          <h2>Are you a yacht owner?</h2>
          <p>List your boat on SailGO and earn money.</p>
          <button>Join Us</button>
        </div>
      </div>
    </div>
  );
}
